#include<bits/stdc++.h>
using namespace std;
typedef long long ll;
ll p,sum[2000010],q[2000010];
int n,d;

int main()
{
	scanf("%d%lld%d",&n,&p,&d);
	ll x;
	for(int i=1;i<=n;i++) scanf("%lld",&x),sum[i]=sum[i-1]+x;
	int h=1,t=0,j=0,ans=d;
	for(int i=d;i<=n;i++)
	{
		while(h<=t&&sum[i]-sum[i-d]>sum[q[t]]-sum[q[t]-d]) t--;
		q[++t]=i;
		while(sum[i]-sum[j]-sum[q[h]]+sum[q[h]-d]>p) 
		{
			j++;
			if(q[h]-d<j) h++;
		}
		ans=max(ans,i-j);
	}
	printf("%d",ans);
}
